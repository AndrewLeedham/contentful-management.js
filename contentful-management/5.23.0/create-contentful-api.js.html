<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>create-contentful-api.js - Documentation</title>

    <script src="scripts/hljs/highlight.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/hljs.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="ApiKey.html">ApiKey</a><ul class='methods'><li data-type='method'><a href="ApiKey.html#.delete">delete</a></li><li data-type='method'><a href="ApiKey.html#.update">update</a></li></ul></li><li><a href="AppDefinition.html">AppDefinition</a><ul class='methods'><li data-type='method'><a href="AppDefinition.html#.delete">delete</a></li><li data-type='method'><a href="AppDefinition.html#.update">update</a></li></ul></li><li><a href="AppInstallation.html">AppInstallation</a><ul class='methods'><li data-type='method'><a href="AppInstallation.html#.delete">delete</a></li><li data-type='method'><a href="AppInstallation.html#.update">update</a></li></ul></li><li><a href="Asset.html">Asset</a><ul class='methods'><li data-type='method'><a href="Asset.html#.archive">archive</a></li><li data-type='method'><a href="Asset.html#.delete">delete</a></li><li data-type='method'><a href="Asset.html#.isArchived">isArchived</a></li><li data-type='method'><a href="Asset.html#.isDraft">isDraft</a></li><li data-type='method'><a href="Asset.html#.isPublished">isPublished</a></li><li data-type='method'><a href="Asset.html#.isUpdated">isUpdated</a></li><li data-type='method'><a href="Asset.html#.processForAllLocales">processForAllLocales</a></li><li data-type='method'><a href="Asset.html#.processForLocale">processForLocale</a></li><li data-type='method'><a href="Asset.html#.publish">publish</a></li><li data-type='method'><a href="Asset.html#.unarchive">unarchive</a></li><li data-type='method'><a href="Asset.html#.unpublish">unpublish</a></li><li data-type='method'><a href="Asset.html#.update">update</a></li></ul></li><li><a href="ContentfulClientAPI.html">ContentfulClientAPI</a><ul class='methods'><li data-type='method'><a href="ContentfulClientAPI.html#.createPersonalAccessToken">createPersonalAccessToken</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.createSpace">createSpace</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getCurrentUser">getCurrentUser</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getOrganization">getOrganization</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getOrganizations">getOrganizations</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getOrganizationUsage">getOrganizationUsage</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getPersonalAccessToken">getPersonalAccessToken</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getPersonalAccessTokens">getPersonalAccessTokens</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getSpace">getSpace</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getSpaces">getSpaces</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.getSpaceUsage">getSpaceUsage</a></li><li data-type='method'><a href="ContentfulClientAPI.html#.rawRequest">rawRequest</a></li></ul></li><li><a href="ContentfulEnvironmentAPI.html">ContentfulEnvironmentAPI</a><ul class='methods'><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createAppInstallation">createAppInstallation</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createAsset">createAsset</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createAssetFromFiles">createAssetFromFiles</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createAssetWithId">createAssetWithId</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createContentType">createContentType</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createContentTypeWithId">createContentTypeWithId</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createEntry">createEntry</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createEntryWithId">createEntryWithId</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createLocale">createLocale</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createUiExtension">createUiExtension</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createUiExtensionWithId">createUiExtensionWithId</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.createUpload">createUpload</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getAppInstallation">getAppInstallation</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getAppInstallations">getAppInstallations</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getAsset">getAsset</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getAssetFromData">getAssetFromData</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getAssets">getAssets</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getContentType">getContentType</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getContentTypes">getContentTypes</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getContentTypeSnapshots">getContentTypeSnapshots</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getEditorInterfaceForContentType">getEditorInterfaceForContentType</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getEntries">getEntries</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getEntry">getEntry</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getEntryFromData">getEntryFromData</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getEntrySnapshots">getEntrySnapshots</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getLocale">getLocale</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getLocales">getLocales</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getUiExtension">getUiExtension</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getUiExtensions">getUiExtensions</a></li><li data-type='method'><a href="ContentfulEnvironmentAPI.html#.getUpload">getUpload</a></li></ul></li><li><a href="contentfulManagement.html">contentfulManagement</a><ul class='methods'><li data-type='method'><a href="contentfulManagement.html#.createClient">createClient</a></li></ul></li><li><a href="ContentfulOrganizationAPI.html">ContentfulOrganizationAPI</a><ul class='methods'><li data-type='method'><a href="ContentfulOrganizationAPI.html#.createAppDefinition">createAppDefinition</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.createOrganizationInvitation">createOrganizationInvitation</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.createTeam">createTeam</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.createTeamMembership">createTeamMembership</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getAppDefinition">getAppDefinition</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getAppDefinitions">getAppDefinitions</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getOrganizationInvitation">getOrganizationInvitation</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getOrganizationMembership">getOrganizationMembership</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getOrganizationMemberships">getOrganizationMemberships</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getOrganizationSpaceMembership">getOrganizationSpaceMembership</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getOrganizationSpaceMemberships">getOrganizationSpaceMemberships</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getTeam">getTeam</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getTeamMembership">getTeamMembership</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getTeamMemberships">getTeamMemberships</a></li><li data-type='method'><a href="ContentfulOrganizationAPI.html#.getTeams">getTeams</a></li></ul></li><li><a href="ContentfulSpaceAPI.html">ContentfulSpaceAPI</a><ul class='methods'><li data-type='method'><a href="ContentfulSpaceAPI.html#.createApiKey">createApiKey</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createApiKeyWithId">createApiKeyWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createAsset">createAsset</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createAssetFromFiles">createAssetFromFiles</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createAssetWithId">createAssetWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createContentType">createContentType</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createContentTypeWithId">createContentTypeWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createEntry">createEntry</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createEntryWithId">createEntryWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createEnvironment">createEnvironment</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createEnvironmentWithId">createEnvironmentWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createLocale">createLocale</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createRole">createRole</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createRoleWithId">createRoleWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createSpaceMembership">createSpaceMembership</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createSpaceMembershipWithId">createSpaceMembershipWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createUiExtension">createUiExtension</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createUiExtensionWithId">createUiExtensionWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createUpload">createUpload</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createWebhook">createWebhook</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.createWebhookWithId">createWebhookWithId</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getApiKey">getApiKey</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getApiKeys">getApiKeys</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getAsset">getAsset</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getAssets">getAssets</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getContentType">getContentType</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getContentTypes">getContentTypes</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getContentTypeSnapshots">getContentTypeSnapshots</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEditorInterfaceForContentType">getEditorInterfaceForContentType</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEntry">getEntry</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEntrySnapshots">getEntrySnapshots</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEnvironment">getEnvironment</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEnvironmentAlias">getEnvironmentAlias</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEnvironmentAliases">getEnvironmentAliases</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getEnvironments">getEnvironments</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getLocale">getLocale</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getLocales">getLocales</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getPreviewApiKey">getPreviewApiKey</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getPreviewApiKeys">getPreviewApiKeys</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getRole">getRole</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getRoles">getRoles</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getSpaceMember">getSpaceMember</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getSpaceMembers">getSpaceMembers</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getSpaceMembership">getSpaceMembership</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getSpaceMemberships">getSpaceMemberships</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getSpaceUser">getSpaceUser</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getSpaceUsers">getSpaceUsers</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getUiExtension">getUiExtension</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getUiExtensions">getUiExtensions</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getUpload">getUpload</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getWebhook">getWebhook</a></li><li data-type='method'><a href="ContentfulSpaceAPI.html#.getWebhooks">getWebhooks</a></li></ul></li><li><a href="ContentType.html">ContentType</a><ul class='methods'><li data-type='method'><a href="ContentType.html#.delete">delete</a></li><li data-type='method'><a href="ContentType.html#.getEditorInterface">getEditorInterface</a></li><li data-type='method'><a href="ContentType.html#.getSnapshot">getSnapshot</a></li><li data-type='method'><a href="ContentType.html#.getSnapshots">getSnapshots</a></li><li data-type='method'><a href="ContentType.html#.isDraft">isDraft</a></li><li data-type='method'><a href="ContentType.html#.isPublished">isPublished</a></li><li data-type='method'><a href="ContentType.html#.isUpdated">isUpdated</a></li><li data-type='method'><a href="ContentType.html#.omitAndDeleteField">omitAndDeleteField</a></li><li data-type='method'><a href="ContentType.html#.publish">publish</a></li><li data-type='method'><a href="ContentType.html#.unpublish">unpublish</a></li><li data-type='method'><a href="ContentType.html#.update">update</a></li></ul></li><li><a href="EditorInterface.html">EditorInterface</a><ul class='methods'><li data-type='method'><a href="EditorInterface.html#.getControlForField">getControlForField</a></li><li data-type='method'><a href="EditorInterface.html#.update">update</a></li></ul></li><li><a href="Entry.html">Entry</a><ul class='methods'><li data-type='method'><a href="Entry.html#.archive">archive</a></li><li data-type='method'><a href="Entry.html#.delete">delete</a></li><li data-type='method'><a href="Entry.html#.getSnapshot">getSnapshot</a></li><li data-type='method'><a href="Entry.html#.getSnapshots">getSnapshots</a></li><li data-type='method'><a href="Entry.html#.isArchived">isArchived</a></li><li data-type='method'><a href="Entry.html#.isDraft">isDraft</a></li><li data-type='method'><a href="Entry.html#.isPublished">isPublished</a></li><li data-type='method'><a href="Entry.html#.isUpdated">isUpdated</a></li><li data-type='method'><a href="Entry.html#.publish">publish</a></li><li data-type='method'><a href="Entry.html#.unarchive">unarchive</a></li><li data-type='method'><a href="Entry.html#.unpublish">unpublish</a></li><li data-type='method'><a href="Entry.html#.update">update</a></li></ul></li><li><a href="EntryFields.html">EntryFields</a></li><li><a href="Environment.html">Environment</a><ul class='methods'><li data-type='method'><a href="Environment.html#.delete">delete</a></li><li data-type='method'><a href="Environment.html#.update">update</a></li></ul></li><li><a href="EnvironmentAlias.html">EnvironmentAlias</a><ul class='methods'><li data-type='method'><a href="EnvironmentAlias.html#.update">update</a></li></ul></li><li><a href="Locale.html">Locale</a><ul class='methods'><li data-type='method'><a href="Locale.html#.delete">delete</a></li><li data-type='method'><a href="Locale.html#.update">update</a></li></ul></li><li><a href="Meta.html">Meta</a></li><li><a href="Organization.html">Organization</a></li><li><a href="OrganizationInvitation.html">OrganizationInvitation</a></li><li><a href="OrganizationMembership.html">OrganizationMembership</a><ul class='methods'><li data-type='method'><a href="OrganizationMembership.html#.delete">delete</a></li><li data-type='method'><a href="OrganizationMembership.html#.update">update</a></li></ul></li><li><a href="PersonalAccessToken.html">PersonalAccessToken</a><ul class='methods'><li data-type='method'><a href="PersonalAccessToken.html#.revoke">revoke</a></li></ul></li><li><a href="PreviewApiKey.html">PreviewApiKey</a></li><li><a href="Role.html">Role</a><ul class='methods'><li data-type='method'><a href="Role.html#.delete">delete</a></li><li data-type='method'><a href="Role.html#.update">update</a></li></ul></li><li><a href="Snapshot.html">Snapshot</a></li><li><a href="Space.html">Space</a><ul class='methods'><li data-type='method'><a href="Space.html#.delete">delete</a></li><li data-type='method'><a href="Space.html#.update">update</a></li></ul></li><li><a href="SpaceMember.html">SpaceMember</a></li><li><a href="SpaceMembership.html">SpaceMembership</a><ul class='methods'><li data-type='method'><a href="SpaceMembership.html#.delete">delete</a></li><li data-type='method'><a href="SpaceMembership.html#.update">update</a></li></ul></li><li><a href="Team.html">Team</a><ul class='methods'><li data-type='method'><a href="Team.html#.delete">delete</a></li><li data-type='method'><a href="Team.html#.update">update</a></li></ul></li><li><a href="TeamMembership.html">TeamMembership</a><ul class='methods'><li data-type='method'><a href="TeamMembership.html#.delete">delete</a></li><li data-type='method'><a href="TeamMembership.html#.update">update</a></li></ul></li><li><a href="UiExtension.html">UiExtension</a><ul class='methods'><li data-type='method'><a href="UiExtension.html#.delete">delete</a></li><li data-type='method'><a href="UiExtension.html#.update">update</a></li></ul></li><li><a href="Upload.html">Upload</a><ul class='methods'><li data-type='method'><a href="Upload.html#.delete">delete</a></li></ul></li><li><a href="Usage.html">Usage</a></li><li><a href="User.html">User</a></li><li><a href="Webhook.html">Webhook</a><ul class='methods'><li data-type='method'><a href="Webhook.html#.delete">delete</a></li><li data-type='method'><a href="Webhook.html#.getCalls">getCalls</a></li><li data-type='method'><a href="Webhook.html#.getCalls">getCalls</a></li><li data-type='method'><a href="Webhook.html#.getHealth">getHealth</a></li><li data-type='method'><a href="Webhook.html#.update">update</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">create-contentful-api.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Contentful Management API Client. Contains methods which allow access to
 * any operations that can be performed with a management token.
 * @namespace ContentfulClientAPI
 */

/**
 * Types for meta information found across the different entities in Contentful
 * @namespace Meta
 */

/**
 * System metadata. See &lt;a href="https://www.contentful.com/developers/docs/references/content-delivery-api/#/introduction/common-resource-attributes">Common Resource Attributes&lt;/a> for more details.
 * @memberof Meta
 * @typedef Sys
 * @prop {string} type
 * @prop {string} id
 * @prop {Meta.Link} space
 * @prop {string} createdAt
 * @prop {string} updatedAt
 * @prop {number} revision
 */

/**
 * Link to another entity. See &lt;a href="https://www.contentful.com/developers/docs/concepts/links/">Links&lt;/a> for more details.
 * @memberof Meta
 * @typedef Link
 * @prop {string} type - type of this entity. Always link.
 * @prop {string} id
 * @prop {string} linkType - type of this link. If defined, either Entry or Asset
 */

/**
 * @memberof ContentfulClientAPI
 * @typedef {Object} ClientAPI
 * @prop {function} getOrganization
 * @prop {function} getOrganizations
 * @prop {function} getSpace
 * @prop {function} getSpaces
 * @prop {function} createSpace
 * @prop {function} createPersonalAccessToken
 * @prop {function} getCurrentUser
 * @prop {function} getPersonalAccessTokens
 * @prop {function} getPersonalAccessToken
 * @prop {function} rawRequest
 * @prop {function} getOrganizationUsage
 * @prop {function} getSpaceUsage
 */

import { createRequestConfig } from 'contentful-sdk-core'
import errorHandler from './error-handler'
import entities from './entities'

/**
 * Creates API object with methods to access functionality from Contentful's
 * Management API
 * @private
 * @param {Object} params - API initialization params
 * @prop {Object} http - HTTP client instance
 * @prop {Function} shouldLinksResolve - Link resolver preconfigured with global setting
 * @return {ClientAPI}
 */
export default function createClientApi ({ http }) {
  const {wrapSpace, wrapSpaceCollection} = entities.space
  const {wrapUser} = entities.user
  const {wrapPersonalAccessToken, wrapPersonalAccessTokenCollection} = entities.personalAccessToken
  const {wrapOrganization, wrapOrganizationCollection} = entities.organization
  const {wrapUsageCollection} = entities.usage

  /**
   * Gets a collection of Organizations
   * @memberof ContentfulClientAPI
   * @return {Promise&lt;OrganizationCollection>} Promise for a collection of Organizations
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getOrganizations()
   * .then(result => console.log(result.items))
   * .catch(console.error)
   */
  function getOrganizations () {
    const baseURL = http.defaults.baseURL.replace('/spaces/', '/organizations/')
    return http.get('', { baseURL })
      .then((response) => wrapOrganizationCollection(http, response.data), errorHandler)
  }

  /**
   * Gets an organization
   * @memberof ContentfulClientAPI
   * @param {string} id - Organization ID
   * @return {Promise&lt;Organization.Organization>} Promise for a Organization
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getOrganization('&lt;org_id>')
   * .then((org) => console.log(org))
   * .catch(console.error)
   */
  function getOrganization (id) {
    const baseURL = http.defaults.baseURL.replace('/spaces/', '/organizations/')
    return http.get('', { baseURL })
      .then((response) => {
        const org = response.data.items.find(org => org.sys.id === id)
        if (!org) {
          const error = new Error(`No organization was found with the ID ${id} instead got ${JSON.stringify(response)}`)
          error.status = 404
          error.statusText = 'Not Found'
          return Promise.reject(error)
        }
        return wrapOrganization(http, org)
      }, errorHandler)
  }

  /**
   * Gets all spaces
   * @memberof ContentfulClientAPI
   * @return {Promise&lt;Space.SpaceCollection>} Promise for a collection of Spaces
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getSpaces()
   * .then((response) => console.log(response.items))
   * .catch(console.error)
   */
  function getSpaces (query = {}) {
    return http.get('', createRequestConfig({query: query}))
      .then((response) => wrapSpaceCollection(http, response.data), errorHandler)
  }

  /**
   * Gets a space
   * @memberof ContentfulClientAPI
   * @param {string} id - Space ID
   * @return {Promise&lt;Space.Space>} Promise for a Space
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getSpace('&lt;space_id>')
   * .then((space) => console.log(space))
   * .catch(console.error)
   */
  function getSpace (id) {
    return http.get(id)
      .then((response) => wrapSpace(http, response.data), errorHandler)
  }

  /**
   * Creates a space
   * @memberof ContentfulClientAPI
   * @see {Space.Space}
   * @param {object} data - Object representation of the Space to be created
   * @param {string=} organizationId - Organization ID, if the associated token can manage more than one organization.
   * @return {Promise&lt;Space.Space>} Promise for the newly created Space
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.createSpace({
   *   name: 'Name of new space'
   * })
   * .then((space) => console.log(space))
   * .catch(console.error)
   */
  function createSpace (data, organizationId) {
    return http.post('', data, {
      headers: organizationId ? {'X-Contentful-Organization': organizationId} : {}
    })
      .then((response) => wrapSpace(http, response.data), errorHandler)
  }

  /**
   * Get organization usage grouped by {@link Usage.UsageMetricEnum metric}
   *
   * @memberof ContentfulClientAPI
   * @param {string} organizationId - Id of an organization
   * @param {Usage.UsageQuery} query - Query parameters
   * @return {Promise&lt;Usage.UsageCollection>} Promise of a collection of usages
   * @example
   *
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getOrganizationUsage('&lt;organizationId>', {
   *    'metric[in]': 'cma,gql',
   *    'dateRange.startAt': '2019-10-22',
   *    'dateRange.endAt': '2019-11-10'
   *    }
   * })
   * .then(result => console.log(result.items))
   * .catch(console.error)
   */
  function getOrganizationUsage (organizationId, query = {}) {
    const baseURL = http.defaults.baseURL.replace('/spaces/', `/organizations/${organizationId}/organization_periodic_usages`)
    return http.get('', {baseURL, params: query})
      .then((response) => wrapUsageCollection(http, response.data), errorHandler)
  }

  /**
   * Get organization usage grouped by space and metric
   *
   * @memberof ContentfulClientAPI
   * @param {string} organizationId - Id of an organization
   * @param {Usage.UsageQuery} query - Query parameters
   * @return {Promise&lt;Usage.UsageCollection>} Promise of a collection of usages
   * @example
   *
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getSpaceUsage('&lt;organizationId>', {
   *    skip: 0,
   *    limit: 10,
   *    'metric[in]': 'cda,cpa,gql',
   *    'dateRange.startAt': '2019-10-22',
   *    'dateRange.endAt': '2020-11-30'
   *    }
   * })
   * .then(result => console.log(result.items))
   * .catch(console.error)
   *
   */
  function getSpaceUsage (organizationId, query = {}) {
    const baseURL = http.defaults.baseURL.replace('/spaces/', `/organizations/${organizationId}/space_periodic_usages`)
    return http.get('', {baseURL, params: query})
      .then((response) => wrapUsageCollection(http, response.data), errorHandler)
  }

  /**
   * Gets the authenticated user
   * @memberof ContentfulClientAPI
   * @return {Promise&lt;User>} Promise for a User
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getCurrentUser()
   * .then(user => console.log(user.firstName))
   * .catch(console.error)
   */
  function getCurrentUser () {
    const baseURL = http.defaults.baseURL.replace('/spaces/', '/users/me/')
    return http.get('', {
      baseURL
    })
      .then((response) => wrapUser(http, response.data), errorHandler)
  }

  /**
   * Creates a personal access token
   * @memberof ContentfulClientAPI
   * @param {Object} data - personal access token config
   * @return {Promise&lt;User>} Promise for a Token
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.createPersonalAccessToken(
   *  {
   *    "name": "My Token",
   *    "scope": [
   *      "content_management_manage"
   *    ]
   *  }
   * )
   * .then(personalAccessToken => console.log(personalAccessToken.token))
   * .catch(console.error)
   */
  function createPersonalAccessToken (data) {
    const baseURL = http.defaults.baseURL.replace('/spaces/', '/users/me/access_tokens')
    return http.post('', data, {
      baseURL
    })
      .then((response) => wrapPersonalAccessToken(http, response.data), errorHandler)
  }

  /**
   * Gets a personal access token
   * @memberof ContentfulClientAPI
   * @param {Object} data - personal access token config
   * @return {Promise&lt;User>} Promise for a Token
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getPersonalAccessToken(tokenId)
   * .then(token => console.log(token.token))
   * .catch(console.error)
   */
  function getPersonalAccessToken (tokenId) {
    const baseURL = http.defaults.baseURL.replace('/spaces/', '/users/me/access_tokens')
    return http.get(tokenId, {
      baseURL
    })
      .then((response) => wrapPersonalAccessToken(http, response.data), errorHandler)
  }

  /**
   * Gets all personal access tokens
   * @memberof ContentfulClientAPI
   * @return {Promise&lt;User>} Promise for a Token
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.getPersonalAccessTokens()
   * .then(response => console.log(reponse.items))
   * .catch(console.error)
   */
  function getPersonalAccessTokens () {
    const baseURL = http.defaults.baseURL.replace('/spaces/', '/users/me/access_tokens')
    return http.get('', {
      baseURL
    })
      .then((response) => wrapPersonalAccessTokenCollection(http, response.data), errorHandler)
  }

  /**
   * Make a custom request to the Contentful management API's /spaces endpoint
   * @memberof ContentfulClientAPI
   * @param {Object} opts - axios request options (https://github.com/mzabriskie/axios)
   * @return {Promise&lt;Object>} Promise for the response data
   * @example
   * const contentful = require('contentful-management')
   *
   * const client = contentful.createClient({
   *   accessToken: '&lt;content_management_api_key>'
   * })
   *
   * client.rawRequest({
   *   method: 'GET',
   *   url: '/custom/path'
   * })
   * .then((responseData) => console.log(responseData))
   * .catch(console.error)
   */
  function rawRequest (opts) {
    return http(opts).then((response) => response.data, errorHandler)
  }

  return {
    getSpaces: getSpaces,
    getSpace: getSpace,
    createSpace: createSpace,
    getOrganization: getOrganization,
    getOrganizations: getOrganizations,
    getCurrentUser: getCurrentUser,
    createPersonalAccessToken: createPersonalAccessToken,
    getPersonalAccessToken: getPersonalAccessToken,
    getPersonalAccessTokens: getPersonalAccessTokens,
    rawRequest: rawRequest,
    getOrganizationUsage: getOrganizationUsage,
    getSpaceUsage: getSpaceUsage
  }
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> using the <a href="https://github.com/contentful/contentful-sdk-jsdoc">contentful-sdk-jsdoc</a> theme.
</footer>

<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
